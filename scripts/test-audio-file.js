/**
 * –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∞—É–¥–∏–æ-—Ñ–∞–π–ª–∞ –Ω–∞–ø—Ä—è–º—É—é
 * –ü–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –≤ —á–µ–º –ø—Ä–æ–±–ª–µ–º–∞ - –≤ —Ñ–∞–π–ª–µ –∏–ª–∏ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ
 */

const fs = require('fs');
const path = require('path');

console.log('üîç –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∞—É–¥–∏–æ-—Ñ–∞–π–ª–∞ —É—Ä–æ–∫–∞ 1\n');

const audioFilePath = path.join(__dirname, '..', 'public', 'audio', 'lesson1', 'slide1.mp3');

console.log('–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∞–π–ª:', audioFilePath);

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
if (fs.existsSync(audioFilePath)) {
  console.log('‚úÖ –§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
  
  // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ
  const stats = fs.statSync(audioFilePath);
  console.log(`üìÅ –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: ${(stats.size / 1024 / 1024).toFixed(2)} MB`);
  console.log(`üìÖ –î–∞—Ç–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏: ${stats.mtime.toLocaleString()}`);
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
  try {
    fs.accessSync(audioFilePath, fs.constants.R_OK);
    console.log('‚úÖ –§–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è');
  } catch (error) {
    console.log('‚ùå –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞');
  }
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ñ–∞–π–ª –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ MP3
  try {
    const buffer = fs.readFileSync(audioFilePath);
    const header = buffer.slice(0, 3).toString('hex');
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º MP3 —Å–∏–≥–Ω–∞—Ç—É—Ä—É
    if (header === '494433' || header === 'fffb' || header === 'fff3' || header === 'fff2') {
      console.log('‚úÖ –§–∞–π–ª –∏–º–µ–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é MP3 —Å–∏–≥–Ω–∞—Ç—É—Ä—É');
    } else {
      console.log('‚ö†Ô∏è  –§–∞–π–ª –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º MP3 (—Å–∏–≥–Ω–∞—Ç—É—Ä–∞: ' + header + ')');
    }
  } catch (error) {
    console.log('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ–∞–π–ª–∞:', error.message);
  }
  
} else {
  console.log('‚ùå –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω');
  console.log('–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å:', audioFilePath);
}

console.log('\nüîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:');
console.log('1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ URL: /audio/lesson1/slide1.mp3');
console.log('2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ MIME-—Ç–∏–ø —Ñ–∞–π–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å audio/mpeg)');
console.log('3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –Ω–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω –∏ –∏–º–µ–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç');
console.log('4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Ñ–∞–π–ª –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ');

console.log('\nüí° –ï—Å–ª–∏ —Ñ–∞–π–ª —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–µ–Ω, –Ω–æ –∑–∞–≤–∏—Å–∞–µ—Ç:');
console.log('- –ü—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –º–µ—Ö–∞–Ω–∏–∑–º–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞');
console.log('- –í–æ–∑–º–æ–∂–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö');
console.log('- –ú–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ');
console.log('- –°—Ç–æ–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫');