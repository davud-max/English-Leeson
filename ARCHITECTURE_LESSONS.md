# –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –£–†–û–ö–û–í - –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —Å–∞–π—Ç (Railway)

## üìä –û–ë–ó–û–†

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Ä–æ–∫–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥–µ**: 22 —É—Ä–æ–∫–∞ (1-15, 21-27)
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ**: 21 —É—Ä–æ–∫ (–ø–æ —Ç–≤–æ–∏–º —Å–ª–æ–≤–∞–º)

## üîÑ –ì–ò–ë–†–ò–î–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### 1. –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL)

–í—Å–µ —É—Ä–æ–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î —á–µ—Ä–µ–∑ Prisma ORM:

```typescript
model Lesson {
  id            String       @id
  courseId      String
  order         Int          // –ù–æ–º–µ—Ä —É—Ä–æ–∫–∞ (1-15, 21-27)
  title         String       // –ù–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞
  description   String       // –û–ø–∏—Å–∞–Ω–∏–µ
  content       String       // Markdown –∫–æ–Ω—Ç–µ–Ω—Ç
  duration      Int          // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö
  published     Boolean      // –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –∏–ª–∏ –Ω–µ—Ç
  
  // UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
  emoji         String       // üìñ —ç–º–æ–¥–∑–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏
  color         String       // –≥—Ä–∞–¥–∏–µ–Ω—Ç —Ü–≤–µ—Ç–∞
  available     Boolean      // –î–æ—Å—Ç—É–ø–µ–Ω –ª–∏ —É—Ä–æ–∫
  
  // –°–ª–∞–π–¥—ã (JSON)
  slides        Json?        // [{id, title, content, emoji, audioText}]
}
```

**API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–∫–æ–≤:**
- `GET /api/lessons` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö —É—Ä–æ–∫–æ–≤
- `GET /api/lessons/[order]` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —É—Ä–æ–∫ –ø–æ –Ω–æ–º–µ—Ä—É

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
```typescript
where: {
  published: true  // –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ
}
```

### 2. –°–¢–ê–¢–ò–ß–ï–°–ö–ò–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

#### `/public/data/slides-config.json`
–ñ—ë—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∞–π–¥–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–∫–∞:

```json
{
  "1": 1,    // –£—Ä–æ–∫ 1 - 1 —Å–ª–∞–π–¥
  "2": 11,   // –£—Ä–æ–∫ 2 - 11 —Å–ª–∞–π–¥–æ–≤
  "3": 14,   // –£—Ä–æ–∫ 3 - 14 —Å–ª–∞–π–¥–æ–≤
  ...
  "15": 43,  // –£—Ä–æ–∫ 15 - 43 —Å–ª–∞–π–¥–∞
  
  "21": 19,  // –£—Ä–æ–∫ 21 - 19 —Å–ª–∞–π–¥–æ–≤
  "22": 26,  // –£—Ä–æ–∫ 22 - 26 —Å–ª–∞–π–¥–æ–≤
  "23": 19,  // –£—Ä–æ–∫ 23 - 19 —Å–ª–∞–π–¥–æ–≤
  "24": 15,  // –£—Ä–æ–∫ 24 - 15 —Å–ª–∞–π–¥–æ–≤
  "25": 26,  // –£—Ä–æ–∫ 25 - 26 —Å–ª–∞–π–¥–æ–≤
  "26": 23,  // –£—Ä–æ–∫ 26 - 23 —Å–ª–∞–π–¥–∞
  "27": 25   // –£—Ä–æ–∫ 27 - 25 —Å–ª–∞–π–¥–æ–≤
}
```

**–í—Å–µ–≥–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ: 22 —É—Ä–æ–∫–∞**
- –£—Ä–æ–∫–∏ 1-15: 15 —É—Ä–æ–∫–æ–≤
- –£—Ä–æ–∫–∏ 21-27: 7 —É—Ä–æ–∫–æ–≤
- **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç**: 16-20 (5 —É—Ä–æ–∫–æ–≤ –ø—Ä–æ–ø—É—â–µ–Ω–æ)

#### Hardcoded –∫–æ–Ω—Ñ–∏–≥ –≤ API route

`/src/app/api/lessons/[order]/route.ts`:

```typescript
const SLIDES_CONFIG: Record<number, number> = {
  1: 1, 2: 11, 3: 14, 4: 14, 5: 13,
  6: 12, 7: 9, 8: 12, 9: 6, 10: 7,
  11: 6, 12: 6, 13: 8, 14: 10, 15: 43,
  21: 19, 22: 26, 23: 19, 24: 15,
  25: 26, 26: 23, 27: 25
};
```

### 3. –ì–ò–ë–†–ò–î–ù–ê–Ø –õ–û–ì–ò–ö–ê –°–õ–ê–ô–î–û–í

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —É—Ä–æ–∫:

```typescript
// 1. –ü–æ–ª—É—á–∞–µ–º —É—Ä–æ–∫ –∏–∑ –ë–î
const lesson = await prisma.lesson.findFirst({
  where: { order: orderNum, published: true }
});

// 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–ª–∞–π–¥–æ–≤ –≤ –ë–î
let slides = lesson.slides;

// 3. –ï—Å–ª–∏ —Å–ª–∞–π–¥–æ–≤ –Ω–µ—Ç - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
if (!slides || slides.length === 0) {
  const slideCount = SLIDES_CONFIG[orderNum] || 1;
  
  slides = Array.from({ length: slideCount }, (_, index) => ({
    id: index + 1,
    title: `Part ${index + 1}`,
    content: lesson.content || `Content for part ${index + 1}`,
    emoji: lesson.emoji || 'üìñ',
    duration: 30000
  }));
}

// 4. –í–æ–∑–≤—Ä–∞—â–∞–µ–º —É—Ä–æ–∫ —Å–æ —Å–ª–∞–π–¥–∞–º–∏
return { ...lesson, slides };
```

## üìÅ –ì–î–ï –ß–¢–û –•–†–ê–ù–ò–¢–°–Ø

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
- ‚úÖ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—Ä–æ–∫–æ–≤
- ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (title, description, emoji, color)
- ‚úÖ Markdown –∫–æ–Ω—Ç–µ–Ω—Ç
- ‚úÖ –§–ª–∞–≥–∏ published/available
- ‚ö†Ô∏è –°–ª–∞–π–¥—ã (JSON) - –º–æ–≥—É—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏

### –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ `/public/data/slides-config.json` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∞–π–¥–æ–≤
- ‚úÖ `/public/audio/lesson-X/slide-Y.mp3` - –∞—É–¥–∏–æ —Ñ–∞–π–ª—ã
- ‚úÖ `/public/data/questions/lesson-X.json` - –≤–æ–ø—Ä–æ—Å—ã –∫–≤–∏–∑–∞

### Code (hardcoded)
- ‚úÖ SLIDES_CONFIG –≤ `/src/app/api/lessons/[order]/route.ts`
- ‚úÖ LESSON_DESCRIPTIONS –≤ `/prisma/seed.ts`
- ‚úÖ –¢–æ–ª—å–∫–æ LESSON_1_CONTENT –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø–æ–ª–Ω–µ–Ω

## üîç –ö–ê–ö –û–ü–†–ï–î–ï–õ–ò–¢–¨ –î–ò–ù–ê–ú–ò–ß–ï–°–ö–û–ï VS –°–¢–ê–¢–ò–ß–ï–°–ö–û–ï

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ò—Å—Ç–æ—á–Ω–∏–∫ | –¢–∏–ø |
|-----------|----------|-----|
| –°–ø–∏—Å–æ–∫ —É—Ä–æ–∫–æ–≤ | PostgreSQL | üîÑ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π |
| –ù–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞ | PostgreSQL | üîÑ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π |
| –û–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–∞ | PostgreSQL | üîÑ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π |
| –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–∞ | PostgreSQL | üîÑ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π |
| –°–ª–∞–π–¥—ã —É—Ä–æ–∫–∞ | PostgreSQL ‚Üí Fallback: slides-config.json | üîÄ –ì–∏–±—Ä–∏–¥–Ω—ã–π |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∞–π–¥–æ–≤ | slides-config.json | üì¶ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π |
| –ê—É–¥–∏–æ —Ñ–∞–π–ª—ã | /public/audio/ | üì¶ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã |
| –í–æ–ø—Ä–æ—Å—ã –∫–≤–∏–∑–∞ | /public/data/questions/ | üì¶ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã |
| –§–ª–∞–≥ published | PostgreSQL | üîÑ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π |
| –§–ª–∞–≥ available | PostgreSQL | üîÑ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π |

## ‚ùì –ü–û–ß–ï–ú–£ 21 –£–†–û–ö, –ê –ù–ï 22?

**–í –∫–æ–Ω—Ñ–∏–≥–µ**: 22 —É—Ä–æ–∫–∞ (1-15, 21-27)
**–ù–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ**: 21 —É—Ä–æ–∫

–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
1. ‚ùå –û–¥–∏–Ω —É—Ä–æ–∫ –Ω–µ —Å–æ–∑–¥–∞–Ω –≤ –ë–î (–Ω–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ lessons)
2. ‚ùå –û–¥–∏–Ω —É—Ä–æ–∫ –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω (published: false)
3. ‚ùå –û–¥–∏–Ω —É—Ä–æ–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (available: false) - –Ω–æ —ç—Ç–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—á—ë—Ç—á–∏–∫

## üîß –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨

–ó–∞–ø—É—Å—Ç–∏ –æ–¥–∏–Ω –∏–∑ —Å–∫—Ä–∏–ø—Ç–æ–≤:

```bash
cd /Users/davudzulumkhanov/thinking-course-en

# TypeScript
npx tsx check-lessons.ts

# Node.js
node check-lessons-count.js

# Bash
bash check-db.sh
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- –¢–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Ä–æ–∫–æ–≤ –≤ –ë–î
- –ö–∞–∫–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã / –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã
- –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å –Ω–æ–º–µ—Ä–∞–º–∏

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–•–ï–ú–ê

```
–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ –ó–ê–•–û–î–ò–¢ –ù–ê /lessons
         ‚Üì
  GET /api/lessons
         ‚Üì
    PostgreSQL
  WHERE published = true
  ORDER BY order ASC
         ‚Üì
   [Lesson 1, Lesson 2, ..., Lesson 27]
         ‚Üì
    –ü–æ–∫–∞–∑—ã–≤–∞–µ–º 21 —É—Ä–æ–∫
    (–æ–¥–∏–Ω –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω)
         
         
–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ –û–¢–ö–†–´–í–ê–ï–¢ –£–†–û–ö #3
         ‚Üì
  GET /api/lessons/3
         ‚Üì
    PostgreSQL
  WHERE order = 3 AND published = true
         ‚Üì
    lesson.slides –ø—É—Å—Ç–æ–π?
         ‚Üì
        –î–ê ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º SLIDES_CONFIG[3] = 14 —Å–ª–∞–π–¥–æ–≤
         |   –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º 14 –∑–∞–≥–ª—É—à–µ–∫
         |
        –ù–ï–¢ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º lesson.slides –∏–∑ –ë–î
         ‚Üì
    –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Ä–æ–∫ —Å 14 —Å–ª–∞–π–¥–∞–º–∏
```

## üéØ –í–´–í–û–î–´

**–û—Å–Ω–æ–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è (–ë–î)
**–° —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏**: –°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∞–π–¥–æ–≤)
**–õ–æ–≥–∏–∫–∞**: –ì–∏–±—Ä–∏–¥–Ω–∞—è (–ë–î ‚Üí fallback ‚Üí –∫–æ–Ω—Ñ–∏–≥)

–í—Å–µ –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ PostgreSQL, –Ω–æ –µ—Å–ª–∏ —Å–ª–∞–π–¥—ã –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã - —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ placeholder'–æ–≤.
