// Generate audio for Lesson 10: The Theory of Cognitive Resonance (Phenomenological Model)
// Run: node scripts/generate-lesson10-audio.js

const { execSync } = require('child_process');
const fs = require('fs');
const path = require('path');

const slides = [
  {
    id: 1,
    text: `We have traveled a tremendous path together. We have examined what a definition is, what a number is, a formula, a law, a sacred description. But the most personal, most intimate question remains: how exactly do I do this? How is a thought born in my head?

Today's lecture is special. This is not an exposition of truth. This is a report on an internal investigation. I am a pedagogue. I must understand how a thought comes to a child, in order to help it come.`
  },
  {
    id: 2,
    text: `Our brain is a supercomputer. Trillions of operations per second. Billions of possible thoughts. How do I manage to choose that very one, the needed one?

If I were the one sorting through all the options, it would be physically impossible. We hit a logical wall: that very I which should choose the thought is itself a product of the thought process. A closed circle.

To break it, a different model is needed. Let's imagine that I is not the author of thoughts, but their radio receiver.`
  },
  {
    id: 3,
    text: `Let us recall how a radio receiver works. In the airwaves ‚Äî thousands of signals from different radio stations. The receiver has an oscillatory circuit with a tunable natural frequency. When the circuit's frequency matches the frequency of one of the stations ‚Äî resonance occurs. The signal of that station is sharply amplified, all others are filtered out.

What if our consciousness works the same way?

The airwaves ‚Äî an infinite fund of possible combinations of abstractions, spontaneously generated by the brain.
The radio station ‚Äî a specific thought, possessing a unique frequency.
The oscillatory circuit or heterodyne ‚Äî a structure in our brain whose natural frequency is unique for each person.
Resonance ‚Äî the moment when the frequency of one of the thoughts matches the frequency of our heterodyne. This thought is sharply amplified, reaches the threshold of awareness.

In this model, we do not compose thoughts. We catch them. We are not the conductor of the neural orchestra. We are a listener who, turning the tuning dial, catches in the airwaves that very melody that resonates with us.`
  },
  {
    id: 4,
    text: `Where do these radio stations ‚Äî thoughts ‚Äî come from? Let us trace the path from the very beginning, from an infant.

First distinction. An infant cries ‚Äî receives the breast. He does not yet know words, but distinguishes a connection: this sound leads to good.

Physical abstraction. He sees an apple. To see it as a whole, one must draw a boundary between the apple and not-apple. This is the birth of a first-level abstraction.

Second-level abstraction. The brain conserves energy. Seeing many apples, it creates a generalized pattern apple in general. Thus is born an absolute abstraction.

Sign. When people agree: to this pattern we assign the sound apple. An abstraction connected with a sign ‚Äî this is knowledge.`
  },
  {
    id: 5,
    text: `Memory is not a warehouse of pictures. It is preserved patterns of frequencies.

Forgot a word? You send a query to memory. While the search continues, there is no resonance ‚Äî you don't remember.

Someone prompts you: Maybe Ivanov? A new pattern enters interaction with your query. No resonance ‚Äî No, that's not it.

Found it! The pattern matched perfectly. Cognitive resonance occurs. The pattern is restored in all its fullness. Yes, it's Petrov!

To remember means to tune your heterodyne to the frequency of the preserved pattern and obtain resonance.`
  },
  {
    id: 6,
    text: `And here we approach what is most important for me as a pedagogue. If this model is close to the truth, then:

To teach thinking does not mean filling memory with ready-made patterns. That is like giving a person ready-made radio broadcasts on cassettes. He will reproduce them, but will not learn to tune his receiver.

To teach thinking means training the very process of tuning:

Developing the ability to distinguish ‚Äî exercises where one needs to find differences, draw a boundary.
Developing the ability to compare ‚Äî finding similarities and differences.
Developing the ability to abstract ‚Äî moving from the specific to the general.
Creating conditions for resonance ‚Äî asking the right questions.

When a child themselves, through a sequence of distinctions, arrives at the formulation of the Pythagorean theorem, cognitive resonance occurs in their brain. They cry Wow! Such a child will not be lazy to think. They will think with pleasure.`
  },
  {
    id: 7,
    text: `So, who are we in this model? We are a complex system that itself generates the airwaves of possible thoughts and itself tunes in to receive them.

Our I is not a static conductor. It is a dynamic process of tuning, a unique resonant circuit whose frequency is the sum of all our past experience.

We have no power over the entire airwaves of our thoughts. But we have power to turn the tuning dial ‚Äî to ask ourselves questions, to change the focus of attention, to learn to distinguish and compare. And then we will increasingly catch those signals ‚Äî thoughts ‚Äî that lead us to our goal, to beauty, to truth.

Assignment for today: Catch your next thought. Not as its master, but as a radio amateur. Ask yourself: what wave was I tuned to when it came?`
  }
];

const outputDir = path.join(__dirname, '..', 'public', 'audio', 'lesson10');

// Create output directory if not exists
if (!fs.existsSync(outputDir)) {
  fs.mkdirSync(outputDir, { recursive: true });
  console.log(`üìÅ Created directory: ${outputDir}`);
}

// Generate audio for each slide using edge-tts
async function generateAudio() {
  console.log('üéôÔ∏è Generating audio for Lesson 10: The Theory of Cognitive Resonance\n');
  
  for (const slide of slides) {
    const outputFile = path.join(outputDir, `slide${slide.id}.mp3`);
    const textFile = path.join(outputDir, `slide${slide.id}.txt`);
    
    // Write text to temp file
    fs.writeFileSync(textFile, slide.text);
    
    console.log(`üîä Generating slide ${slide.id}...`);
    
    try {
      // Using edge-tts with en-US-GuyNeural voice (natural male voice)
      execSync(`edge-tts --voice en-US-GuyNeural --rate="-5%" --file "${textFile}" --write-media "${outputFile}"`, {
        stdio: 'inherit'
      });
      
      // Clean up temp text file
      fs.unlinkSync(textFile);
      
      console.log(`‚úÖ Slide ${slide.id} complete: ${outputFile}\n`);
    } catch (error) {
      console.error(`‚ùå Error generating slide ${slide.id}:`, error.message);
      console.log('   Make sure edge-tts is installed: pip install edge-tts');
    }
  }
  
  console.log('üéâ Audio generation complete for Lesson 10!');
  console.log('\nüìå If edge-tts is not installed, run: pip install edge-tts');
}

generateAudio();
